import{r as x,H as ae,I as b,J as ne,K as j,N as Q,c as H,d as J,O as oe,a as T,b as t,g as p,w as S,u as y,h as C,Q as W,j as X,o as P}from"./vendor-DGZwV-PT.js";import{e as Y,j as M,k as L,_ as V,f as Z}from"./ui-CDWYX3AX.js";import{o as q}from"./deps-CzC_8w3S.js";const le=[{id:"superadmin_1",email:"superadmin@example.com",fullname:"Superadmin User",user_type:"superadmin",avatar:"https://i.pravatar.cc/300?img=1"},{id:"admin_1",email:"admin@example.com",fullname:"Admin User",user_type:"admin",avatar:"https://i.pravatar.cc/300?img=2"},{id:"manager_1",email:"manager@example.com",fullname:"Manager User",user_type:"manager",avatar:"https://i.pravatar.cc/300?img=4"},{id:"user_1",email:"user@example.com",fullname:"Regular User",user_type:"user",avatar:"https://i.pravatar.cc/300?img=3"}],ie=i=>({email:i.email,password:"password123"});var re=(i=>(i.MEMORY="memory",i.LOCAL_STORAGE="localStorage",i.SESSION_STORAGE="sessionStorage",i))(re||{});const U=new Map;function ue(i={}){const e={type:"memory",ttl:3e5,prefix:"cache:",maxItems:100,debug:!1,...i},n=f=>`${e.prefix}${f}`,c=(f,...v)=>{e.debug&&console.debug(`[Cache] ${f}`,...v)},k=(f,v,u)=>{const{ttl:o,type:r}={...e,...u},s=n(f),_={data:v,expiresAt:o!==null?Date.now()+o:null,createdAt:Date.now()};switch(c(`Setting ${s}`,_),r){case"localStorage":try{localStorage.setItem(s,JSON.stringify(_))}catch(R){console.error("Error storing in localStorage:",R)}break;case"sessionStorage":try{sessionStorage.setItem(s,JSON.stringify(_))}catch(R){console.error("Error storing in sessionStorage:",R)}break;case"memory":default:if(U.size>=e.maxItems){const R=[...U.entries()].sort(([,F],[,$])=>F.createdAt-$.createdAt)[0][0];c(`Cache full, removing oldest item: ${R}`),U.delete(R)}U.set(s,_);break}},m=(f,v)=>{const{type:u}={...e,...v},o=n(f);let r=null;switch(u){case"localStorage":try{const s=localStorage.getItem(o);s&&(r=JSON.parse(s))}catch(s){console.error("Error retrieving from localStorage:",s)}break;case"sessionStorage":try{const s=sessionStorage.getItem(o);s&&(r=JSON.parse(s))}catch(s){console.error("Error retrieving from sessionStorage:",s)}break;case"memory":default:r=U.get(o)||null;break}if(r){const s=Date.now();if(r.expiresAt===null||r.expiresAt>s)return c(`Cache hit for ${o}`,r),r.data;c(`Cache expired for ${o}`),d(f,{type:u})}else c(`Cache miss for ${o}`);return null},d=(f,v)=>{const{type:u}={...e,...v},o=n(f);switch(c(`Removing ${o}`),u){case"localStorage":localStorage.removeItem(o);break;case"sessionStorage":sessionStorage.removeItem(o);break;case"memory":default:U.delete(o);break}};return{set:k,get:m,remove:d,clear:f=>{const{type:v,prefix:u}={...e,...f};switch(c(`Clearing cache type: ${v}`),v){case"localStorage":for(let o=localStorage.length-1;o>=0;o--){const r=localStorage.key(o);r&&r.startsWith(u)&&localStorage.removeItem(r)}break;case"sessionStorage":for(let o=sessionStorage.length-1;o>=0;o--){const r=sessionStorage.key(o);r&&r.startsWith(u)&&sessionStorage.removeItem(r)}break;case"memory":default:[...U.keys()].forEach(o=>{o.startsWith(u)&&U.delete(o)});break}},cachedRef:(f,v,u)=>{const o=m(f,u),r=x(o!==null?o:v);return ae(r,s=>{k(f,s,u)},{deep:!0}),r},getStats:f=>{const{type:v,prefix:u}={...e,...f};let o=0,r=0;switch(v){case"localStorage":for(let s=0;s<localStorage.length;s++){const _=localStorage.key(s);_&&_.startsWith(u)&&(o++,r+=(localStorage.getItem(_)||"").length*2)}break;case"sessionStorage":for(let s=0;s<sessionStorage.length;s++){const _=sessionStorage.key(s);_&&_.startsWith(u)&&(o++,r+=(sessionStorage.getItem(_)||"").length*2)}break;case"memory":default:for(const s of U.keys())if(s.startsWith(u)){o++;try{r+=JSON.stringify(U.get(s)).length*2}catch{}}break}return{type:v,count:o,size:r,sizeInKB:Math.round(r/1024)}},getKey:n}}const E=new Map;function ee(i,e,n){const c=n?JSON.stringify(n):"";return`${i}:${e}:${c}`}function ce(i={}){const e={maxPendingTime:3e4,debug:!1,...i},n=(g,...w)=>{e.debug&&console.debug(`[RequestDeduplication] ${g}`,...w)};return{deduplicate:async(g,w,A,f,v)=>{const u={...e,...v},o=ee(g,w,f);if(E.has(o))return n(`Deduplicating request: ${o}`),E.get(o);n(`New request: ${o}`);try{const r=A();E.set(o,r),setTimeout(()=>{E.get(o)===r&&(n(`Cleaning up stale request: ${o}`),E.delete(o))},u.maxPendingTime);const s=await r;return E.delete(o),s}catch(r){throw E.delete(o),r}},cancelAll:()=>{n(`Cancelling all pending requests: ${E.size}`),E.clear()},getPendingCount:()=>E.size,isPending:(g,w,A)=>{const f=ee(g,w,A);return E.has(f)}}}const te=ue({prefix:"api:",type:re.MEMORY,debug:!1}),de=ce({debug:!1}),se={development:{name:"Development",apiUrl:"http://localhost:3000/api"},staging:{name:"Staging",apiUrl:"https://staging-api.example.com"},production:{name:"Production",apiUrl:"https://api.example.com"}},me=()=>{var e;return window.API_URL?window.API_URL:((e=se["production"])==null?void 0:e.apiUrl)||se.development.apiUrl},pe=()=>{const i=localStorage.getItem("access_token"),e=localStorage.getItem("csrf_token");return{"Content-Type":"application/json",Accept:"application/json",...i?{Authorization:`Bearer ${i}`}:{},...e?{"X-CSRF-TOKEN":e}:{}}},ge=i=>{const e=i.method||"GET",n=i.params?`?${new URLSearchParams(i.params).toString()}`:"",c=i.body?`:${JSON.stringify(i.body)}`:"";return`${e}:${i.endpoint}${n}${c}`},fe=i=>i,ve=(i,e,n)=>{},he=i=>{var e,n;if(i.response){const c=i.response.status,k=((e=i.response._data)==null?void 0:e.message)||"An error occurred",m=(n=i.response._data)==null?void 0:n.errors;return{status:c,message:k,errors:m}}else return i.request?{status:500,message:"No response received from server"}:{status:500,message:i.message||"An error occurred"}};async function G(i){const e=fe(i),n=e.cache!==!1&&(e.method||"GET").toUpperCase()==="GET",c=e.deduplicate!==!1,k=ge(e);if(n){const d=te.get(k);if(d)return d}const m=async()=>{var d,g,w,A,f;try{const v={method:e.method||"GET",body:e.body,headers:{...pe(),...e.headers},credentials:"include",retry:e.retry===!0?3:e.retry||0,timeout:e.timeout,responseType:e.responseType};e.params&&(v.params=e.params);const u=await q(`${me()}${e.endpoint}`,v);ve(e.endpoint,e.method||"GET",u);const o=(d=u.headers)==null?void 0:d.get("X-New-Access-Token");o&&localStorage.setItem("access_token",o);const r=(g=u.headers)==null?void 0:g.get("X-CSRF-TOKEN");r&&localStorage.setItem("csrf_token",r);const s={data:u,status:200};if(n){const _=e.cacheTTL||null;te.set(k,s,{ttl:_})}return s}catch(v){const u=he(v);if(u.status===401){const o=D(),r=(A=(w=v.response)==null?void 0:w.headers)==null?void 0:A.get("X-New-Access-Token");if(r)return localStorage.setItem("access_token",r),G(i);try{if(await o.refreshAccessToken())return G(i)}catch{b.error("Your session has expired. Please log in again."),await o.logout()}}if(u.status===403&&b.error("You don't have permission to perform this action."),u.status===404&&b.error("The requested resource was not found."),u.status===422&&u.errors){const o=(f=Object.values(u.errors)[0])==null?void 0:f[0];o&&b.error(o)}return u.status>=500&&b.error("An unexpected error occurred. Please try again later."),{data:{},status:u.status,message:u.message,errors:u.errors}}};return c?de.deduplicate(e.method||"GET",e.endpoint,m,e.body):m()}const ye=(i,e,n={})=>G({endpoint:i,method:"POST",body:e,cache:!1,...n}),K=()=>{if(window.API_URL)return window.API_URL;const i="production",e={development:"http://localhost:3000/api",staging:"https://staging-api.example.com",production:"https://api.example.com"};return e[i]||e.development},D=ne("auth",()=>{let i=null;try{const l=j();l&&typeof l=="object"&&(i=Q(l))}catch{console.warn("Router not available when initializing auth store"),i=null}const e=x(null),n=x(null),c=x(null),k=x(!1),m=x(null),d=x([]),g=x(!1),w=x(null),A=H(()=>!!n.value&&!!e.value),f=()=>{if(!i)try{const l=j();i=Q(l)}catch{console.warn("Router still not available")}return i},v=l=>{var h;return((h=e.value)==null?void 0:h.user_type)===l},u=l=>{var I;const h={superadmin:["all","user:read","user:write","user:delete","settings:read","settings:write","system:read","system:write"],admin:["user:read","user:write","settings:read","settings:write"],manager:["user:read","user:write","team:read","team:write","project:read","project:write"],user:["user:read"]};return((I=e.value)==null?void 0:I.user_type)==="superadmin"?!0:e.value?h[e.value.user_type].includes(l):!1},o=async()=>{try{const l=localStorage.getItem("csrf_token");if(l)return c.value=l,l;try{const h=await q(`${K()}/auth/csrf-token`,{method:"GET",credentials:"include",timeout:3e3});return c.value=h.token,localStorage.setItem("csrf_token",h.token),h.token}catch(h){console.error("Failed to fetch CSRF token:",h);const I=`mock_csrf_${Date.now()}`;return c.value=I,localStorage.setItem("csrf_token",I),I}}catch(l){return console.error("Error in fetchCSRFToken:",l),""}},r=async()=>{const l=localStorage.getItem("user");l&&(e.value=JSON.parse(l));const h=localStorage.getItem("access_token"),I=localStorage.getItem("csrf_token");if(h&&(n.value=h),I&&(c.value=I),n.value&&!e.value)try{await s()}catch{_()}c.value||await o();const z=localStorage.getItem("impersonating")==="true",B=localStorage.getItem("original_user");z&&B&&(g.value=!0,w.value=JSON.parse(B))},s=async()=>{try{const{data:l}=await ye("/auth/me",{});e.value=l,localStorage.setItem("user",JSON.stringify(l))}catch(l){throw console.error("Failed to fetch user data:",l),l}},_=()=>{e.value=null,n.value=null,c.value=null,d.value=[],localStorage.removeItem("access_token"),localStorage.removeItem("user"),localStorage.removeItem("csrf_token")};async function R(l){k.value=!0,m.value=null;try{const h=le.find(B=>B.email===l.email),I=h?ie(h):null;if(!h||l.password!==(I==null?void 0:I.password))throw new Error("Invalid email or password");const z={accessToken:`mock_token_${h.id}`,user:h};n.value=z.accessToken,e.value=z.user,n.value&&(localStorage.setItem("access_token",n.value),localStorage.setItem("user",JSON.stringify(e.value))),await o()}catch(h){throw console.error("Login error:",h),m.value=h.message||"Login failed",h}finally{k.value=!1}}async function F(l){var h;k.value=!0,m.value=null;try{await o();const I=await q(`${K()}/auth/sso/${l.provider}`,{method:"POST",body:{token:l.token},headers:{"X-CSRF-TOKEN":c.value||""},credentials:"include"});n.value=I.tokens.access_token,e.value=I.user,n.value&&(localStorage.setItem("access_token",n.value),localStorage.setItem("user",JSON.stringify(e.value)))}catch(I){throw console.error("SSO Login error:",I),m.value=((h=I.data)==null?void 0:h.message)||"SSO login failed",I}finally{k.value=!1}}async function $(){try{await o();const l=await q(`${K()}/auth/refresh-token`,{method:"POST",credentials:"include",headers:{"X-CSRF-TOKEN":c.value||""}});return n.value=l.accessToken,localStorage.setItem("access_token",l.accessToken),l.accessToken}catch(l){return console.error("Token refresh failed:",l),a(),null}}async function a(){try{if(n.value)try{await q(`${K()}/auth/logout`,{method:"POST",credentials:"include",headers:{Authorization:`Bearer ${n.value||""}`,"X-CSRF-TOKEN":c.value||""},timeout:2e3})}catch(l){console.error("Logout API call failed:",l)}}catch(l){console.error("Logout error:",l)}finally{_();const l=f();l&&l.push("/login")}}async function N(l){if(!e.value)throw new Error("Cannot impersonate: No authenticated user");if(!u("user:impersonate"))throw new Error("You don't have permission to impersonate users");try{w.value={...e.value},g.value=!0,e.value=l,localStorage.setItem("impersonating","true"),localStorage.setItem("original_user",JSON.stringify(w.value)),localStorage.setItem("user",JSON.stringify(e.value)),console.log(`Now impersonating user: ${l.email}`)}catch(h){throw console.error("Failed to impersonate user:",h),h}}async function O(){if(!(!g.value||!w.value))try{e.value=w.value,g.value=!1,w.value=null,localStorage.removeItem("impersonating"),localStorage.removeItem("original_user"),localStorage.setItem("user",JSON.stringify(e.value)),console.log("Stopped impersonating, returned to original user")}catch(l){throw console.error("Failed to stop impersonating:",l),l}}return{user:e,accessToken:n,csrfToken:c,isLoading:k,error:m,roles:d,isAuthenticated:A,hasRole:v,hasPermission:u,login:R,loginWithSSO:F,logout:a,init:r,refreshAccessToken:$,fetchUserData:s,impersonating:H(()=>g.value),originalUser:H(()=>w.value),impersonateUser:N,stopImpersonating:O}}),we={key:0,class:"flex items-center justify-center h-full"},ke={key:1},Se={class:"space-y-2"},xe={class:"space-y-2"},_e={class:"flex items-center justify-between"},be={class:"relative"},Ce={class:"text-sm text-gray-500"},$e={key:0,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-4 w-4"},Ie={key:1,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"h-4 w-4"},Ae={key:0},Te={key:1},Pe={class:"mt-6 space-y-3"},Re={class:"grid grid-cols-3 gap-2"},Oe={class:"text-center text-sm text-muted-foreground mt-6"},Ee=J({__name:"login",setup(i){const e=j(),n=D(),c=x(""),k=x(""),m=x(!1),d=x(!1),g=x(!0);oe(()=>{setTimeout(()=>{n.isAuthenticated&&(console.log("User already authenticated, redirecting to appropriate dashboard"),w()),g.value=!1},300)});function w(){var s;switch((s=n.user)==null?void 0:s.user_type){case"superadmin":e.replace("/superadmin/home");break;case"admin":e.replace("/admin/home");break;case"manager":e.replace("/manager/home");break;case"user":e.replace("/user/home");break}}async function A(){if(!c.value||!k.value){b.error("Please fill in all fields");return}try{m.value=!0,await n.login({email:c.value,password:k.value});const r=e.currentRoute.value.query.redirect;r?e.push(r):w()}catch(r){console.error("Login error:",r),b.error(r.message||"Invalid email or password")}finally{m.value=!1}}async function f(){try{m.value=!0,await n.login({email:"superadmin@example.com",password:"password123"}),console.log("Superadmin login successful, redirecting to dashboard"),e.push("/superadmin/home")}catch(r){console.error("Superadmin login failed:",r),b.error(r.message||"Login failed")}finally{m.value=!1}}async function v(){try{m.value=!0,await n.login({email:"admin@example.com",password:"password123"}),console.log("Admin login successful, redirecting to dashboard"),e.push("/admin/home")}catch(r){console.error("Admin login failed:",r),b.error(r.message||"Login failed")}finally{m.value=!1}}async function u(){try{m.value=!0,await n.login({email:"user@example.com",password:"password123"}),console.log("User login successful, redirecting to home"),e.push("/user/home")}catch(r){console.error("User login failed:",r),b.error(r.message||"Login failed")}finally{m.value=!1}}function o(){d.value=!d.value}return(r,s)=>{const _=W("router-link");return g.value?(P(),T("div",we,s[2]||(s[2]=[t("div",{class:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-primary border-r-transparent align-[-0.125em] motion-reduce:animate-[spin_1.5s_linear_infinite]"},null,-1)]))):(P(),T("div",ke,[s[16]||(s[16]=t("div",{class:"flex flex-col space-y-2 text-center"},[t("h1",{class:"text-2xl font-semibold tracking-tight"}," Sign in to your account "),t("p",{class:"text-sm text-muted-foreground"}," Enter your email and password below to sign in ")],-1)),p(y(Z),null,{default:S(()=>[p(y(Y),{class:"pt-4"},{default:S(()=>[t("form",{onSubmit:X(A,["prevent"]),class:"space-y-4"},[t("div",Se,[p(y(M),{for:"email"},{default:S(()=>s[3]||(s[3]=[C("Email")])),_:1,__:[3]}),p(y(L),{id:"email",modelValue:c.value,"onUpdate:modelValue":s[0]||(s[0]=R=>c.value=R),type:"email",placeholder:"m@example.com",required:""},null,8,["modelValue"])]),t("div",xe,[t("div",_e,[p(y(M),{for:"password"},{default:S(()=>s[4]||(s[4]=[C("Password")])),_:1,__:[4]}),p(_,{to:"/forgot-password",class:"text-xs text-primary underline underline-offset-4 hover:text-primary/90"},{default:S(()=>s[5]||(s[5]=[C(" Forgot password? ")])),_:1,__:[5]})]),t("div",be,[p(y(L),{id:"password",modelValue:k.value,"onUpdate:modelValue":s[1]||(s[1]=R=>k.value=R),type:d.value?"text":"password",placeholder:"••••••••",required:""},null,8,["modelValue","type"]),t("button",{type:"button",onClick:o,class:"absolute inset-y-0 right-0 flex items-center px-3"},[t("span",Ce,[d.value?(P(),T("svg",$e,s[6]||(s[6]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.98 8.223A10.477 10.477 0 001.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.45 10.45 0 0112 4.5c4.756 0 8.773 3.162 10.065 7.498a10.523 10.523 0 01-4.293 5.774M6.228 6.228L3 3m3.228 3.228l3.65 3.65m7.894 7.894L21 21m-3.228-3.228l-3.65-3.65m0 0a3 3 0 10-4.243-4.243m4.242 4.242L9.88 9.88"},null,-1)]))):(P(),T("svg",Ie,s[7]||(s[7]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"},null,-1),t("circle",{cx:"12",cy:"12",r:"3"},null,-1)])))])])])]),p(y(V),{type:"submit",class:"w-full",disabled:m.value},{default:S(()=>[m.value?(P(),T("span",Ae,s[8]||(s[8]=[t("svg",{class:"animate-spin mr-2 h-4 w-4 text-primary-foreground",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),C(" Signing in... ")]))):(P(),T("span",Te,"Sign in"))]),_:1},8,["disabled"])],32),t("div",Pe,[s[12]||(s[12]=t("div",{class:"relative"},[t("div",{class:"absolute inset-0 flex items-center"},[t("span",{class:"w-full border-t"})]),t("div",{class:"relative flex justify-center text-xs"},[t("span",{class:"bg-background px-2 text-muted-foreground"}," Quick Login ")])],-1)),t("div",Re,[p(y(V),{variant:"outline",size:"sm",onClick:f,disabled:m.value},{default:S(()=>s[9]||(s[9]=[C(" Superadmin ")])),_:1,__:[9]},8,["disabled"]),p(y(V),{variant:"outline",size:"sm",onClick:v,disabled:m.value},{default:S(()=>s[10]||(s[10]=[C(" Admin ")])),_:1,__:[10]},8,["disabled"]),p(y(V),{variant:"outline",size:"sm",onClick:u,disabled:m.value},{default:S(()=>s[11]||(s[11]=[C(" User ")])),_:1,__:[11]},8,["disabled"])]),s[13]||(s[13]=t("p",{class:"text-xs text-center text-muted-foreground"}," Superadmin: Platform manager | Admin: Regular admin | User: Standard user ",-1))])]),_:1})]),_:1}),t("p",Oe,[s[15]||(s[15]=C(" Don't have an account? ")),p(_,{to:"/register",class:"text-primary underline underline-offset-4 hover:text-primary/90"},{default:S(()=>s[14]||(s[14]=[C(" Sign up ")])),_:1,__:[14]})])]))}}}),lt=Object.freeze(Object.defineProperty({__proto__:null,default:Ee},Symbol.toStringTag,{value:"Module"})),Ue={class:"space-y-2"},Ve={class:"space-y-2"},Ne={class:"space-y-2"},Me={class:"relative"},Le={class:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"},Fe={key:0,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"h-4 w-4"},qe={key:1,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"h-4 w-4"},je={class:"space-y-2"},ze={class:"relative"},Be={class:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"},Ke={key:0,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"h-4 w-4"},De={key:1,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"h-4 w-4"},He={key:0},Ge={key:1},Je={class:"mt-6 space-y-4"},We={class:"grid grid-cols-2 gap-3"},Xe={class:"text-center text-sm text-muted-foreground mt-6"},Ye=J({__name:"register",setup(i){const e=j(),n=D(),c=x(""),k=x(""),m=x(""),d=x(""),g=x(!1),w=x(!1),A=x(!1),f=x(!1),v=x(!1);async function u(){var $;if(!c.value||!k.value||!m.value||!d.value){b.error("Please fill in all fields");return}if(m.value!==d.value){b.error("Passwords do not match");return}try{g.value=!0,b.success("Registration successful! Please check your email to verify your account."),e.push("/login")}catch(a){console.error("Registration error:",a),b.error((($=a.data)==null?void 0:$.message)||"Registration failed. Please try again.")}finally{g.value=!1}}function o(){w.value=!w.value}function r(){A.value=!A.value}function s(){return new Promise($=>{const a=document.createElement("script");a.src="https://apis.google.com/js/api.js",a.async=!0,a.defer=!0,a.onload=()=>{window.gapi.load("auth2",()=>{window.gapi.auth2.init({client_id:void 0}).then(()=>{f.value=!0,$()})})},document.head.appendChild(a)})}async function _(){if(!f.value){b.error("Google authentication is still initializing. Please try again in a moment.");return}try{g.value=!0;const N=(await window.gapi.auth2.getAuthInstance().signIn()).getAuthResponse().id_token;await n.loginWithSSO({provider:"google",token:N})}catch($){console.error("Google login error:",$),b.error($.message||"Failed to login with Google")}finally{g.value=!1}}function R(){return new Promise($=>{if(window.location.protocol!=="https:"){b.error("Facebook login requires HTTPS. Please use a secure connection."),$();return}window.fbAsyncInit=function(){FB.init({appId:void 0,cookie:!0,xfbml:!0,version:"v18.0"}),v.value=!0,$()};const a=document.createElement("script");a.src="https://connect.facebook.net/en_US/sdk.js",a.async=!0,a.defer=!0,document.head.appendChild(a)})}async function F(){if(!v.value){b.error("Facebook authentication is still initializing. Please try again in a moment.");return}if(window.location.protocol!=="https:"){b.error("Facebook login requires HTTPS. Please use a secure connection.");return}try{g.value=!0;const $=await new Promise((a,N)=>{FB.login(O=>{O.authResponse?a(O.authResponse):N(new Error("Facebook login cancelled"))},{scope:"email"})});await n.loginWithSSO({provider:"facebook",token:$.accessToken})}catch($){console.error("Facebook login error:",$),b.error($.message||"Failed to login with Facebook")}finally{g.value=!1}}return oe(()=>{s(),R()}),($,a)=>{const N=W("router-link");return P(),T("div",null,[a[18]||(a[18]=t("div",{class:"flex flex-col space-y-2 text-center"},[t("h1",{class:"text-2xl font-semibold tracking-tight"}," Create an account "),t("p",{class:"text-sm text-muted-foreground"}," Enter your details to create your account ")],-1)),p(y(Z),null,{default:S(()=>[p(y(Y),{class:"pt-4"},{default:S(()=>[t("form",{onSubmit:X(u,["prevent"]),class:"space-y-4"},[t("div",Ue,[p(y(M),{for:"businessName"},{default:S(()=>a[4]||(a[4]=[C("Business Name")])),_:1,__:[4]}),p(y(L),{id:"businessName",modelValue:c.value,"onUpdate:modelValue":a[0]||(a[0]=O=>c.value=O),placeholder:"Your Business Name",required:""},null,8,["modelValue"])]),t("div",Ve,[p(y(M),{for:"email"},{default:S(()=>a[5]||(a[5]=[C("Email")])),_:1,__:[5]}),p(y(L),{id:"email",type:"email",placeholder:"name@example.com",modelValue:k.value,"onUpdate:modelValue":a[1]||(a[1]=O=>k.value=O),required:"",autocomplete:"email"},null,8,["modelValue"])]),t("div",Ne,[p(y(M),{for:"password"},{default:S(()=>a[6]||(a[6]=[C("Password")])),_:1,__:[6]}),t("div",Me,[p(y(L),{id:"password",type:w.value?"text":"password",placeholder:"••••••••",modelValue:m.value,"onUpdate:modelValue":a[2]||(a[2]=O=>m.value=O),required:"",autocomplete:"new-password"},null,8,["type","modelValue"]),t("button",{type:"button",onClick:o,class:"absolute inset-y-0 right-0 flex items-center pr-3 text-sm leading-5"},[t("span",Le,[w.value?(P(),T("svg",Fe,a[7]||(a[7]=[t("path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24"},null,-1),t("path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"},null,-1),t("path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"},null,-1),t("line",{x1:"2",x2:"22",y1:"2",y2:"22"},null,-1)]))):(P(),T("svg",qe,a[8]||(a[8]=[t("path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"},null,-1),t("circle",{cx:"12",cy:"12",r:"3"},null,-1)])))])])])]),t("div",je,[p(y(M),{for:"confirmPassword"},{default:S(()=>a[9]||(a[9]=[C("Confirm Password")])),_:1,__:[9]}),t("div",ze,[p(y(L),{id:"confirmPassword",type:A.value?"text":"password",placeholder:"••••••••",modelValue:d.value,"onUpdate:modelValue":a[3]||(a[3]=O=>d.value=O),required:"",autocomplete:"new-password"},null,8,["type","modelValue"]),t("button",{type:"button",onClick:r,class:"absolute inset-y-0 right-0 flex items-center pr-3 text-sm leading-5"},[t("span",Be,[A.value?(P(),T("svg",Ke,a[10]||(a[10]=[t("path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24"},null,-1),t("path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68"},null,-1),t("path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61"},null,-1),t("line",{x1:"2",x2:"22",y1:"2",y2:"22"},null,-1)]))):(P(),T("svg",De,a[11]||(a[11]=[t("path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"},null,-1),t("circle",{cx:"12",cy:"12",r:"3"},null,-1)])))])])])]),p(y(V),{type:"submit",class:"w-full",disabled:g.value},{default:S(()=>[g.value?(P(),T("span",He,a[12]||(a[12]=[t("svg",{class:"animate-spin mr-2 h-4 w-4 text-primary-foreground",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),C(" Creating account... ")]))):(P(),T("span",Ge,"Create account"))]),_:1},8,["disabled"])],32),t("div",Je,[a[15]||(a[15]=t("div",{class:"relative"},[t("div",{class:"absolute inset-0 flex items-center"},[t("span",{class:"w-full border-t"})]),t("div",{class:"relative flex justify-center text-xs"},[t("span",{class:"bg-background px-2 text-muted-foreground"}," Or continue with ")])],-1)),t("div",We,[p(y(V),{variant:"outline",type:"button",onClick:_,disabled:g.value},{default:S(()=>a[13]||(a[13]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24",width:"24",class:"h-4 w-4 mr-2"},[t("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),t("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),t("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),t("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"}),t("path",{d:"M1 1h22v22H1z",fill:"none"})],-1),C(" Google ")])),_:1,__:[13]},8,["disabled"]),p(y(V),{variant:"outline",type:"button",onClick:F,disabled:g.value},{default:S(()=>a[14]||(a[14]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",class:"h-4 w-4 mr-2 text-blue-600 fill-current"},[t("path",{d:"M9.19795 21.5H13.198V13.4901H16.8021L17.198 9.50977H13.198V7.5C13.198 6.94772 13.6457 6.5 14.198 6.5H17.198V2.5H14.198C11.4365 2.5 9.19795 4.73858 9.19795 7.5V9.50977H7.19795L6.80206 13.4901H9.19795V21.5Z"})],-1),C(" Facebook ")])),_:1,__:[14]},8,["disabled"])])])]),_:1})]),_:1}),t("p",Xe,[a[17]||(a[17]=C(" Already have an account? ")),p(N,{to:"/login",class:"text-primary underline underline-offset-4 hover:text-primary/90"},{default:S(()=>a[16]||(a[16]=[C(" Sign in ")])),_:1,__:[16]})])])}}}),it=Object.freeze(Object.defineProperty({__proto__:null,default:Ye},Symbol.toStringTag,{value:"Module"})),Ze={class:"space-y-2"},Qe={key:0},et={key:1},tt={class:"text-center text-sm text-muted-foreground mt-6"},st=J({__name:"forgot-password",setup(i){const e=j();D();const n=x(""),c=x(!1);async function k(){var m;if(!n.value){b.error("Please enter your email address");return}try{c.value=!0,b.success("Password reset instructions have been sent to your email"),e.push("/login")}catch(d){console.log("error: ",d),b.error(((m=d.data)==null?void 0:m.message)||"Something went wrong. Please try again.")}finally{c.value=!1}}return(m,d)=>{const g=W("router-link");return P(),T("div",null,[d[5]||(d[5]=t("div",{class:"flex flex-col space-y-2 text-center"},[t("h1",{class:"text-2xl font-semibold tracking-tight"}," Forgot Password "),t("p",{class:"text-sm text-muted-foreground"}," Enter your email address and we'll send you instructions to reset your password ")],-1)),p(y(Z),null,{default:S(()=>[p(y(Y),{class:"pt-4"},{default:S(()=>[t("form",{onSubmit:X(k,["prevent"]),class:"space-y-4"},[t("div",Ze,[p(y(M),{for:"email"},{default:S(()=>d[1]||(d[1]=[C("Email")])),_:1,__:[1]}),p(y(L),{id:"email",type:"email",modelValue:n.value,"onUpdate:modelValue":d[0]||(d[0]=w=>n.value=w),placeholder:"name@example.com",required:""},null,8,["modelValue"])]),p(y(V),{type:"submit",class:"w-full",disabled:c.value},{default:S(()=>[c.value?(P(),T("span",Qe,d[2]||(d[2]=[t("svg",{class:"animate-spin mr-2 h-4 w-4 text-primary-foreground",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),C(" Sending... ")]))):(P(),T("span",et,"Send Reset Instructions"))]),_:1},8,["disabled"])],32)]),_:1})]),_:1}),t("p",tt,[d[4]||(d[4]=C(" Remember your password? ")),p(g,{to:"/login",class:"text-primary underline underline-offset-4 hover:text-primary/90"},{default:S(()=>d[3]||(d[3]=[C(" Sign in ")])),_:1,__:[3]})])])}}}),ut=Object.freeze(Object.defineProperty({__proto__:null,default:st},Symbol.toStringTag,{value:"Module"}));export{ut as f,lt as l,it as r,D as u};
